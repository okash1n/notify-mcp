<!doctype html>
<html lang="ja">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>notify-mcp</title>
    <link rel="stylesheet" href="/styles.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600;700&family=IBM+Plex+Mono:wght@400;500&display=swap" rel="stylesheet">
  </head>
  <body>
    <div class="bg"></div>
    <header class="hero">
      <div>
        <p class="eyebrow">notify-mcp</p>
        <h1>Agent-ready notifications with a single tool.</h1>
        <p class="sub">MCPサーバーとWeb UIを1つのコンテナで。タスク完了や入力待ちを見逃さない。</p>
      </div>
      <div class="card auth">
        <h2>Auth</h2>
        <p class="hint">認証を有効にするとAPIがトークン必須になります。</p>
        <label>
          <span>Auth Enabled</span>
          <input id="authEnabled" type="checkbox" />
        </label>
        <label>
          <span>Token</span>
          <input id="tokenInput" type="password" placeholder="nmcp_xxx" />
        </label>
        <div class="row">
          <button id="saveToken" class="primary">Use token</button>
          <button id="refreshToken" class="ghost">Reload</button>
          <button id="regenerateToken" class="ghost">Regenerate</button>
        </div>
      </div>
    </header>

    <main class="grid">
      <section class="card">
        <h2>Settings</h2>
        <label>
          <span>Broadcast</span>
          <input id="broadcastToggle" type="checkbox" />
        </label>
        <label>
          <span>Logging Enabled</span>
          <input id="loggingToggle" type="checkbox" />
        </label>
        <label>
          <span>Logging DB Path</span>
          <input id="loggingPath" type="text" placeholder="./data/notify-logs.sqlite" />
        </label>
        <button id="saveSettings" class="primary">Save Settings</button>
      </section>

      <section class="card">
        <h2>Test Notification</h2>
        <label>
          <span>Message</span>
          <input id="testMessage" type="text" placeholder="Build finished, please review." />
        </label>
        <label>
          <span>Urgency</span>
          <select id="testUrgency">
            <option value="info">info</option>
            <option value="action_required">action_required</option>
          </select>
        </label>
        <button id="sendTest" class="primary">Send</button>
        <pre id="testResult" class="log"></pre>
      </section>

      <section class="card span-2">
        <div class="row space">
          <h2>Add Channel</h2>
        </div>
        <div id="newChannel" class="channel-item"></div>
        <div class="row">
          <button id="addChannel" class="primary">Add Channel</button>
          <span id="addChannelStatus" class="hint"></span>
        </div>
      </section>

      <section class="card span-2">
        <div class="row space">
          <h2>Channels</h2>
          <button id="reloadChannels" class="ghost">Reload</button>
        </div>
        <div id="channels" class="channels"></div>
      </section>

      <section class="card span-2">
        <div class="row space">
          <h2>Logs</h2>
          <button id="reloadLogs" class="ghost">Reload</button>
        </div>
        <div id="logs" class="logs"></div>
      </section>
    </main>

    <script src="/app.js" type="module"></script>
  </body>
</html>
